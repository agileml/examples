# 搭建阿里云训练架构



## 服务器端：

（1）服务器端创建NAS 文件系统

https://help.aliyun.com/document_detail/27530.html?spm=a2c4g.11186623.2.14.5fcd7532QCuhXK#section-5jo-0kj-jn5

 

（2）添加NAS挂载点

https://help.aliyun.com/document_detail/27531.html?spm=a2c4g.11186623.2.15.5fcd7532QCuhXK#section-6xi-a3u-zkq

 

 

## 客户端：

（1）客户端往挂载点传输文件（代码/数据）



通过sftp上传。

https://help.aliyun.com/document_detail/101120.html?spm=a2c4g.11186623.6.605.3a561c75sZMKMK



或者安装NFS后，直接mount

apt-get update && apt-get install -y nfs-common

sudo mount -t nfs -o vers=4.0 xxx-xxx.cn-zhangjiakou.nas.aliyuncs.com:/ /usr/sftp/file

 

（2） 创建PVC，PV，并在容器中指定使用

https://help.aliyun.com/document_detail/130895.html?spm=a2c4g.11186623.6.588.47304af8LkrJml

 

## 提交作业流程

![image-20191117221637953](E:\examples\搭建阿里云训练架构.assets\image-20191117221637953.png)



（1）用户上传文件（代码&训练数据）到NAS

（2）k8s创建对应的PV/PVC

（3）用户上传作业YAML, 在yaml中指定使用的镜像，已经对应的pvc

（4）集群创建作业，等待调度